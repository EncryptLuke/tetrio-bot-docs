# Resuming a connection

There are two circumstances under which resuming a connection is necessary. The first is if a disconnection happens. The second is if the client is instructed to migrate to a new endpoint via a [`migrate` message](Message/server_migrate.md). Both situations can be handled the same way.

When initially connecting to a Ribbon, the Ribbon will send a [`hello` message](Messages/server_hello.md) to the client containing to critical pieces of informationâ€”the socket id (`id`) and the resume token (`resume`). These should be stored for use in the event that resuming is necessary.

After reconnecting to a Ribbon, whether via a new endpoint or by the same one, the client must send a [`resume` message](Messages/client_resume.md) with the socket id (`socketid`) and resume token (`resumetoken`). After this, the client should send a [`hello` message](Messages/client_hello.md) with the most recent id'd packets sent to the Ribbon so it can handle the ones it hasn't seen because the client was disconnected at the time. This is to ensure sync. After this, the server should send a [`hello` message](Messages/server_hello.md) back with the its most-recent id'd packets for the client to sort through. The official TETR.IO client sends the 200 most recent packets.